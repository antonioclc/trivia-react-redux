(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{33:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},36:function(e,t,a){e.exports=a(50)},41:function(e,t,a){},48:function(e,t){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),i=a.n(s),c=a(35),o=(a(41),a(12));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(14),u=a(30),m=a(31),d=a(5);var p={name:"",email:"",token:{},questions:{},points:0,answeredCorrectly:0};var h={questions:{}};var f=Object(l.combineReducers)({playerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,a=e.answeredCorrectly;switch(t.type){case"SET_USER_DATA":return Object(d.a)(Object(d.a)({},e),{},{name:t.payload.name,email:t.payload.email});case"SAVE_TOKEN_DATA":return Object(d.a)(Object(d.a)({},e),{},{token:t.payload});case"SAVE_QUESTIONS_DATA":return Object(d.a)(Object(d.a)({},e),{},{questions:t.payload});case"UPDATE_POINTS":return Object(d.a)(Object(d.a)({},e),{},{points:t.payload});case"UPDATE_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{answeredCorrectly:a+1});case"RESET_PLAYER":return p;default:return e}},questionsReduce:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_QUESTIONS_DATA":return Object(d.a)(Object(d.a)({},e),{},{questions:t.payload});default:return e}}}),b=Object(l.createStore)(f,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(m.a)));window.Cypress&&(window.store=b);var v=b,g=a(3),y=a(7),k=a(8),E=a(10),O=a(9),S=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es"))}}]),a}(n.Component),w=a(25),j=a.n(w),A=a(32),N=a(19),C=a(2),T=a(33),I=a.n(T),R=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){var e;return Object(y.a)(this,a),(e=t.call(this)).state={name:"",email:"",disableBtn:!0},e.handleChange=e.handleChange.bind(Object(C.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(C.a)(e)),e}return Object(k.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.resetData)(),localStorage.removeItem("state")}},{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState(Object(N.a)({},n,r),(function(){return t.validateInfos()}))}},{key:"clearInputs",value:function(){this.setState({name:"",email:""})}},{key:"configurationRedirect",value:function(){this.props.history.push("/configurations")}},{key:"validateInfos",value:function(){var e=this.state,t=e.name,a=e.email,n=!1,r=!1;t.length>0&&(n=!0),a.length>0&&(r=!0),r&&n?this.setState({disableBtn:!1}):this.setState({disableBtn:!0})}},{key:"handleSubmit",value:function(){var e=Object(A.a)(j.a.mark((function e(t){var a,n,r,s,i,c,o,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state,n=a.name,r=a.email,s={player:{name:n,assertions:0,score:0,gravatarEmail:r}},localStorage.setItem("state",JSON.stringify(s)),i=this.props,c=i.dispatchSetValue,o=i.dispatchTokenThunk,l=i.history,c({name:n,email:r}),this.clearInputs(),e.next=9,o();case 9:l.push("/trivia");case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.email,s=t.disableBtn;return r.a.createElement("div",{className:"container-form-login"},r.a.createElement("form",{className:"form-login",onSubmit:this.handleSubmit},r.a.createElement("img",{className:"trivia-img",src:I.a}),r.a.createElement("label",{htmlFor:"input-player-name"},r.a.createElement("p",{className:"form-title"},"Nome:"),r.a.createElement("input",{className:"input-login",type:"text","data-testid":"input-player-name",id:"input-player-name",name:"name",value:a,placeholder:"Digite aqui seu nome",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"input-gravatar-email"},r.a.createElement("p",{className:"form-title"},"Email:"),r.a.createElement("input",{className:"input-login",type:"email","data-testid":"input-gravatar-email",id:"input-gravatar-email",name:"email",value:n,placeholder:"Digite aqui seu email",onChange:this.handleChange})),r.a.createElement("button",{className:"send-login","data-testid":"btn-play",type:"submit",id:"btn-play",disabled:s},"\u25b6 Jogar"),r.a.createElement("button",{className:"send-login",type:"button","data-testid":"btn-settings",onClick:function(){return e.configurationRedirect()}},"\ud83d\udd27 Configura\xe7\xf5es")))}}]),a}(n.Component),D=Object(o.b)((function(e){return{token:e.playerReducer.token}}),(function(e){return{dispatchSetValue:function(t){return e({type:"SET_USER_DATA",payload:t})},dispatchTokenThunk:function(){return e((function(e){return fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json()})).then((function(t){e({type:"SAVE_TOKEN_DATA",payload:t}),localStorage.setItem("token",JSON.stringify(t)),fetch("https://opentdb.com/api.php?amount=5&token=".concat(t.token)).then((function(e){return e.json()})).then((function(t){return e(function(e){return{type:"SAVE_QUESTIONS_DATA",payload:e}}(t))}))}))}))},resetData:function(){return e({type:"RESET_PLAYER"})}}}))(R),_=a(21),x=a(20),q=a.n(x),J=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){var e;return Object(y.a)(this,a),(e=t.call(this)).state={gravatar:""},e.cryptoString=e.cryptoString.bind(Object(C.a)(e)),e}return Object(k.a)(a,[{key:"componentDidMount",value:function(){this.cryptoString()}},{key:"cryptoString",value:function(){var e=this.props.email,t=q()(e).toString();this.setState({gravatar:t})}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.points,n=this.state.gravatar;return r.a.createElement("header",{className:"header-container"},r.a.createElement("div",{className:"header-user"},r.a.createElement("img",{"data-testid":"header-profile-picture",src:"https://www.gravatar.com/avatar/".concat(n),alt:"gravatarimg"}),r.a.createElement("h2",{"data-testid":"header-player-name"},t)),r.a.createElement("h3",{"data-testid":"header-score"},"Sua pontua\xe7\xe3o:"," ",a))}}]),a}(n.Component),P=Object(o.b)((function(e){return{email:e.playerReducer.email,name:e.playerReducer.name,points:e.playerReducer.points}}))(J),U=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){var e;return Object(y.a)(this,a),(e=t.call(this)).state={answered:!1,answersArr:[],firstTime:!0,correctAnswer:"",questionIndex:0,seconds:30,difficulty:"",assertions:0},e.getAnswers=e.getAnswers.bind(Object(C.a)(e)),e.shuffleArray=e.shuffleArray.bind(Object(C.a)(e)),e.handleAnswerClick=e.handleAnswerClick.bind(Object(C.a)(e)),e.setClassname=e.setClassname.bind(Object(C.a)(e)),e.nextQuestion=e.nextQuestion.bind(Object(C.a)(e)),e}return Object(k.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.state.seconds;t.seconds!==a&&this.answeredOrTimeout()}},{key:"setTimer",value:function(){var e=this;this.timerID=setInterval((function(){e.setState((function(e){return{seconds:e.seconds-1}}))}),1e3)}},{key:"setClassname",value:function(e){var t=this.state,a=t.answered,n=t.correctAnswer;return a?e!==n?"incorrect-answer":"correct-answer":""}},{key:"getAnswers",value:function(){var e=this,t=this.state,a=t.answersArr,n=t.correctAnswer,s=t.answered;return a.map((function(t,a){return r.a.createElement("button",{type:"button",name:t!==n?"incorrect-answer":"correct-answer",key:a,"data-testid":t!==n?"wrong-answer-".concat(a):"correct-answer",onClick:e.handleAnswerClick,className:e.setClassname(t),disabled:s},t)}))}},{key:"answeredOrTimeout",value:function(){var e=this.state,t=e.answered;(0===e.seconds||t)&&(this.setState({answered:!0}),clearInterval(this.timerID))}},{key:"shuffleArray",value:function(e){for(var t=e.length-1;t>0;t-=1){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e}},{key:"handleAnswerClick",value:function(e){var t=e.target,a=this.state,n=a.difficulty,r=a.seconds,s=this.props,i=s.setPoints,c=s.points,o=s.setSuccess;if("correct-answer"===t.name){var l=JSON.parse(localStorage.getItem("state"));this.setState((function(e){return{assertions:e.assertions+1}}));var u=10+r*{easy:1,medium:2,hard:3}[n],m=Number(c)+u;l.player.score=m,localStorage.setItem("state",JSON.stringify(l)),i(m),o()}this.setState({answered:!0})}},{key:"nextQuestion",value:function(){var e=this.props,t=e.questions,a=e.history,n=this.state.questionIndex;if(clearInterval(this.timerID),n<t.length-1)this.setState((function(e){return{questionIndex:e.questionIndex+1,answered:!1,firstTime:!0,seconds:30}}));else{var r=this.state.assertions,s=JSON.parse(localStorage.getItem("state"));s.player.assertions=r,localStorage.setItem("state",JSON.stringify(s)),a.push("/feedback")}}},{key:"render",value:function(){var e=this.props.questions,t=this.state,a=t.firstTime,n=t.questionIndex,s=t.seconds,i=t.difficulty,c=t.answered;if(e&&a){var o=[].concat(Object(_.a)(e[n].incorrect_answers),[e[n].correct_answer]);this.setState({answersArr:this.shuffleArray(o),firstTime:!1,correctAnswer:e[n].correct_answer,difficulty:e[n].difficulty}),this.setTimer()}var l=r.a.createElement("button",{className:"trivia-next-btn","data-testid":"btn-next",type:"button",onClick:this.nextQuestion}," ","Pr\xf3ximo"," ");return r.a.createElement("div",null,r.a.createElement(P,null),r.a.createElement("div",{className:"trivia-container"},e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"trivia-category"},r.a.createElement("p",{"data-testid":"question-category"},"Categoria:"," ",e[n].category),r.a.createElement("p",null,"Dificuldade:"," ",i)),r.a.createElement("p",{className:"trivia-question","data-testid":"question-text"},e[n].question),r.a.createElement("div",{className:"trivia-answers"},this.getAnswers()),r.a.createElement("p",{className:"trivia-timer"},s),c&&l)))}}]),a}(n.Component),M=Object(o.b)((function(e){return{questions:e.playerReducer.questions.results,points:e.playerReducer.points,numberOfSuccess:e.playerReducer.answeredCorrectly}}),(function(e){return{setPoints:function(t){return e({type:"UPDATE_POINTS",payload:t})},setSuccess:function(){return e({type:"UPDATE_SUCCESS"})}}}))(U),V=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){var e;return Object(y.a)(this,a),(e=t.call(this)).playAgain=e.playAgain.bind(Object(C.a)(e)),e.showRanking=e.showRanking.bind(Object(C.a)(e)),e}return Object(k.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("state")),t=JSON.parse(localStorage.getItem("ranking"))||[],a=JSON.stringify([].concat(Object(_.a)(t),[e]));localStorage.setItem("ranking",a)}},{key:"feedbackMessageGenerator",value:function(){return this.props.numberOfSuccess<3?"Podia ser melhor...\ud83d\ude13":"Mandou bem! \ud83d\ude1c"}},{key:"playAgain",value:function(){this.props.history.push("/")}},{key:"showRanking",value:function(){this.props.history.push("/ranking")}},{key:"render",value:function(){var e=this.props,t=e.numberOfSuccess,a=e.totalScore;return r.a.createElement("div",null,r.a.createElement(P,null),r.a.createElement("div",{className:"feedback-container"},r.a.createElement("h1",{"data-testid":"feedback-text"}," ",this.feedbackMessageGenerator()," "),r.a.createElement("h3",{"data-testid":"feedback-total-score"},"Pontua\xe7\xe3o:"," ",a),r.a.createElement("h3",{"data-testid":"feedback-total-question"},"Respostas certas:"," ",t),r.a.createElement("div",{className:"feedback-btn-container"},r.a.createElement("button",{className:"feedback-btn","data-testid":"btn-play-again",type:"button",onClick:this.playAgain},"Jogar novamente"),r.a.createElement("button",{className:"feedback-btn","data-testid":"btn-ranking",type:"button",onClick:this.showRanking},"Ver Ranking"))))}}]),a}(n.Component),Q=Object(o.b)((function(e){return{numberOfSuccess:e.playerReducer.answeredCorrectly,totalScore:e.playerReducer.points}}))(V),B=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){var e;return Object(y.a)(this,a),(e=t.call(this)).goHome=e.goHome.bind(Object(C.a)(e)),e.renderRanking=e.renderRanking.bind(Object(C.a)(e)),e}return Object(k.a)(a,[{key:"goHome",value:function(){this.props.history.push("/")}},{key:"renderRanking",value:function(){return JSON.parse(localStorage.getItem("ranking")).sort((function(e,t){return t.player.score-e.player.score})).map((function(e,t){var a=e.player,n=a.gravatarEmail,s=a.name,i=a.score,c=q()(n).toString();return r.a.createElement("li",{key:t,className:"ranking-player"},r.a.createElement("p",{className:"ranking-position-number"},"".concat(t+1,"\xba")),r.a.createElement("img",{src:"https://www.gravatar.com/avatar/".concat(c),alt:"gravatarimg"})," ",r.a.createElement("div",{className:"ranking-player-name-and-score"},r.a.createElement("h2",{className:"ranking-player-name-and-score-text","data-testid":"player-name-".concat(t)},s),r.a.createElement("p",{className:"ranking-player-name-and-score-text","data-testid":"player-score-".concat(t)},i," pontos")))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"ranking-container"},r.a.createElement("h1",{"data-testid":"ranking-title"},"\ud83c\udfc6 Ranking \ud83c\udfc6"),r.a.createElement("ol",null,this.renderRanking()),r.a.createElement("button",{className:"ranking-btn","data-testid":"btn-go-home",type:"button",onClick:this.goHome},"Ir para a Home"))}}]),a}(n.Component);function H(){return r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",component:D}),r.a.createElement(g.a,{path:"/trivia",component:M}),r.a.createElement(g.a,{path:"/configurations",component:S}),r.a.createElement(g.a,{path:"/feedback",component:Q}),r.a.createElement(g.a,{path:"/ranking",component:B}))}i.a.render(r.a.createElement(c.a,{basename:"/trivia-react-redux"},r.a.createElement(o.a,{store:v},r.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.63376865.chunk.js.map